!function(t){var e={};function a(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(i,r,function(e){return t[e]}.bind(null,r));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="dist",a(a.s=0)}([function(module,exports){function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}var CalcController=function(){function CalcController(){_classCallCheck(this,CalcController),this._audio=new Audio("click.mp3"),this._audioOnOff=!1,this._lastOperator="",this._lastNumber="",this._operation=[],this._locale="pt-BR",this._displayCalcEl=document.querySelector("#display"),this._dateEl=document.querySelector("#data"),this._timeEl=document.querySelector("#hora"),this._currentDate,this.initialize(),this.initButtonsEvents(),this.initKeyboard(),this.pasteFromClipboard()}return _createClass(CalcController,[{key:"copyToClipboard",value:function(){var t=document.createElement("input");t.value=this.displayCalc,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove()}},{key:"initialize",value:function(){var t=this;this.setDisplayDateTime(),this.setLastNumberToDisplay(),document.querySelectorAll(".btn-ac").forEach(function(e){e.addEventListener("dblclick",function(e){t.toggleAudio()})})}},{key:"toggleAudio",value:function(){this._audioOnOff=!this._audioOnOff}},{key:"playAudio",value:function(){this._audioOnOff&&(this._audio.currentTime=0,this._audio.play())}},{key:"pasteFromClipboard",value:function(){var t=this;document.addEventListener("paste",function(e){var a=e.clipboardData.getData("Text");t.displayCalc=parseFloat(a)})}},{key:"initKeyboard",value:function(){var t=this;document.addEventListener("keyup",function(e){switch(t.playAudio(),e.key){case"Escape":t.clearAll();break;case"Backspace":t.clearEntry();break;case"+":t.addOperation("+");break;case"-":t.addOperation("-");break;case"/":t.addOperation("/");break;case"*":t.addOperation("*");break;case"%":t.addOperation("%");case"=":case"Enter":t.calc();break;case".":t.addDot();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.addOperation(parseInt(e.key));break;case"c":e.ctrlKey&&t.copyToClipboard()}})}},{key:"clearAll",value:function(){this._lastNumber=[0],this._operation=[],this._lastOperator="",this.setLastNumberToDisplay()}},{key:"clearEntry",value:function(){this._operation.pop(),this.setLastNumberToDisplay(this._operation.length-1)}},{key:"getLastOperation",value:function(){return this._operation[this._operation.length-1]}},{key:"isOperator",value:function(t){return["+","-","*","%","/"].indexOf(t)>-1}},{key:"setLastOperation",value:function(t){this._operation[this._operation.length-1]=t}},{key:"pushOperation",value:function(t){this._operation.push(t),this._operation.length>3&&this.calc()}},{key:"getResult",value:function getResult(){var _this4=this;try{return eval(this._operation.join(""))}catch(t){setTimeout(function(){_this4.setError()},1)}}},{key:"calc",value:function(){var t="";if(this._lastOperator=this.getLastItem(),this._operation.length<3){var e=this._operation[0];this._operation=[e,this._lastOperator,this._lastNumber]}this._operation.length>3?(t=this._operation.pop(),this._lastNumber=this.getResult()):3==this._operation.length&&(this._lastNumber=this.getLastItem(!1)),result=this.getResult(),"%"==t?(result/=100,this._operation=[result]):(this._operation=[result],t&&this._operation.push(t)),this.setLastNumberToDisplay()}},{key:"getLastItem",value:function(){for(var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=this._operation.length-1;a>=0;a--)if(this.isOperator(this._operation[a])==e){t=this._operation[a];break}return t||(t=e?this._lastOperator:this._lastNumber),t}},{key:"setLastNumberToDisplay",value:function(){var t=this.getLastItem(!1);t||(t=0),this.displayCalc=t}},{key:"addOperation",value:function(t){if(isNaN(this.getLastOperation()))this.isOperator(t)?this.setLastOperation(t):(this.pushOperation(t),this.setLastNumberToDisplay());else if(this.isOperator(t))this.pushOperation(t);else{var e=this.getLastOperation().toString()+t.toString();this.setLastOperation(e),this.setLastNumberToDisplay()}}},{key:"setError",value:function(){this.displayCalc="Error"}},{key:"addDot",value:function(){var t=this.getLastOperation();"string"==typeof t&&t.split("").indexOf(".")>1||(this.isOperator(t)||!t?this.pushOperation("0."):this.setLastOperation(t.toString()+"."),this.setLastNumberToDisplay())}},{key:"execBtn",value:function(t){switch(this.playAudio(),t){case"ac":this.clearAll();break;case"ce":this.clearEntry();break;case"soma":this.addOperation("+");break;case"subtracao":this.addOperation("-");break;case"divisao":this.addOperation("/");break;case"multiplicacao":this.addOperation("*");break;case"porcento":this.addOperation("%");case"igual":this.calc();break;case"ponto":this.addDot();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addOperation(parseInt(t));break;default:this.setError()}}},{key:"setDisplayDateTime",value:function(){var t=this;setInterval(function(){t.displayDate=t.currentDate.toLocaleDateString(t._locale),t.displayTime=t.currentDate.toLocaleTimeString(t._locale)},1e3)}},{key:"addEventListenerAll",value:function(t,e,a){e.split(" ").forEach(function(e){t.addEventListener(e,a)})}},{key:"initButtonsEvents",value:function(){var t=this;document.querySelectorAll("#buttons > g, #parts > g").forEach(function(e){t.addEventListenerAll(e,"click drag",function(a){var i=e.className.baseVal.replace("btn-","");t.execBtn(i)}),t.addEventListenerAll(e,"mouseover mouseup mousedown",function(t){e.style.cursor="pointer"})})}},{key:"displayTime",get:function(){return this._timeEl.innerHTML},set:function(t){return this._timeEl.innerHTML=t}},{key:"displayDate",get:function(){return this._dateEl.innerHTML},set:function(t){return this._dateEl.innerHTML=t}},{key:"displayCalc",get:function(){return this._displayCalcEl.innerHTML},set:function(t){if(t.toString().length>10)return this.setError(),!1;this._displayCalcEl.innerHTML=t}},{key:"currentDate",get:function(){return new Date},set:function(t){this._currentDate=t}}]),CalcController}();window.calculator=new CalcController}]);