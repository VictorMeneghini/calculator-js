!function(e){var t={};function a(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(i,r,function(t){return e[t]}.bind(null,r));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="dist",a(a.s=0)}([function(module,exports){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var CalcController=function(){function CalcController(){_classCallCheck(this,CalcController),this._audio=new Audio("click.mp3"),this._audioOnOff=!1,this._lastOperator="",this._lastNumber="",this._operation=[],this._locale="pt-BR",this._displayCalcEl=document.querySelector("#display"),this._dateEl=document.querySelector("#data"),this._timeEl=document.querySelector("#hora"),this._currentDate,this.initialize(),this.initButtonsEvents(),this.initKeyboard(),this.pasteFromClipboard()}return _createClass(CalcController,[{key:"copyToClipboard",value:function(){var e=document.createElement("input");e.value=this.displayCalc,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.remove()}},{key:"initialize",value:function(){this.setDisplayDateTime(),this.setLastNumberToDisplay(),this.toggleAudio()}},{key:"toggleAudio",value:function(){this._audioOnOff=!this._audioOnOff}},{key:"playAudio",value:function(){this._audioOnOff&&(this._audio.currentTime=0,this._audio.play())}},{key:"pasteFromClipboard",value:function(){var e=this;document.addEventListener("paste",function(t){var a=t.clipboardData.getData("Text");e.displayCalc=parseFloat(a)})}},{key:"initKeyboard",value:function(){var e=this;document.addEventListener("keyup",function(t){switch(e.playAudio(),t.key){case"Escape":e.clearAll();break;case"Backspace":e.clearEntry();break;case"+":e.addOperation("+");break;case"-":e.addOperation("-");break;case"/":e.addOperation("/");break;case"*":e.addOperation("*");break;case"%":e.addOperation("%");break;case"=":case"Enter":e.calc();break;case".":e.addDot();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.addOperation(parseInt(t.key));break;case"c":t.ctrlKey&&e.copyToClipboard()}})}},{key:"clearAll",value:function(){this._lastNumber=[0],this._operation=[],this._lastOperator="",this.setLastNumberToDisplay()}},{key:"clearEntry",value:function(){this._operation.pop(),this.setLastNumberToDisplay(this._operation.length-1)}},{key:"getLastOperation",value:function(){return this._operation[this._operation.length-1]}},{key:"isOperator",value:function(e){return["+","-","*","%","/"].indexOf(e)>-1}},{key:"setLastOperation",value:function(e){this._operation[this._operation.length-1]=e}},{key:"pushOperation",value:function(e){this._operation.push(e),this._operation.length>3&&this.calc()}},{key:"getResult",value:function getResult(){var _this3=this;try{return eval(this._operation.join(""))}catch(e){setTimeout(function(){_this3.setError()},1)}}},{key:"calc",value:function(){var e,t="";if(this._lastOperator=this.getLastItem(),this._operation.length<3){var a=this._operation[0];this._operation=[a,this._lastOperator,this._lastNumber]}this._operation.length>3?(t=this._operation.pop(),this._lastNumber=this.getResult()):3==this._operation.length&&(this._lastNumber=this.getLastItem(!1)),e=this.getResult(),"%"==t?(e/=100,this._operation=[e]):(this._operation=[e],t&&this._operation.push(t)),this.setLastNumberToDisplay()}},{key:"getLastItem",value:function(){for(var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=this._operation.length-1;a>=0;a--)if(this.isOperator(this._operation[a])==t){e=this._operation[a];break}return e||(e=t?this._lastOperator:this._lastNumber),e}},{key:"setLastNumberToDisplay",value:function(){var e=this.getLastItem(!1);e||(e=0),this.displayCalc=e}},{key:"addOperation",value:function(e){if(isNaN(this.getLastOperation()))this.isOperator(e)?this.setLastOperation(e):(this.pushOperation(e),this.setLastNumberToDisplay());else if(this.isOperator(e))this.pushOperation(e);else{var t=this.getLastOperation().toString()+e.toString();this.setLastOperation(t),this.setLastNumberToDisplay()}}},{key:"setError",value:function(){this.displayCalc="Error"}},{key:"addDot",value:function(){var e=this.getLastOperation();"string"==typeof e&&e.split("").indexOf(".")>1||(this.isOperator(e)||!e?this.pushOperation("0."):this.setLastOperation(e.toString()+"."),this.setLastNumberToDisplay())}},{key:"execBtn",value:function(e){switch(this.playAudio(),e){case"ac":this.clearAll();break;case"ce":this.clearEntry();break;case"soma":this.addOperation("+");break;case"subtracao":this.addOperation("-");break;case"divisao":this.addOperation("/");break;case"multiplicacao":this.addOperation("*");break;case"porcento":this.addOperation("%");break;case"igual":this.calc();break;case"ponto":this.addDot();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addOperation(parseInt(e));break;default:this.setError()}}},{key:"setDisplayDateTime",value:function(){var e=this;setInterval(function(){e.displayDate=e.currentDate.toLocaleDateString(e._locale),e.displayTime=e.currentDate.toLocaleTimeString(e._locale)},1e3)}},{key:"addEventListenerAll",value:function(e,t,a){t.split(" ").forEach(function(t){e.addEventListener(t,a)})}},{key:"initButtonsEvents",value:function(){var e=this;document.querySelectorAll("#buttons > g, #parts > g").forEach(function(t){e.addEventListenerAll(t,"click drag",function(){var a=t.className.baseVal.replace("btn-","");e.execBtn(a)}),e.addEventListenerAll(t,"mouseover mouseup mousedown",function(){t.style.cursor="pointer"})})}},{key:"displayTime",get:function(){return this._timeEl.innerHTML},set:function(e){return this._timeEl.innerHTML=e}},{key:"displayDate",get:function(){return this._dateEl.innerHTML},set:function(e){return this._dateEl.innerHTML=e}},{key:"displayCalc",get:function(){return this._displayCalcEl.innerHTML},set:function(e){if(e.toString().length>10)return this.setError(),!1;this._displayCalcEl.innerHTML=e}},{key:"currentDate",get:function(){return new Date},set:function(e){this._currentDate=e}}]),CalcController}();window.calculator=new CalcController}]);